<!-- time-picker.component.html -->
<div class="time-picker-wrapper relative w-full">
  <!-- Label -->
  <label class="block text-sm lg:text-base SF-Medium text-text-main tracking-tight mb-2">
    {{ label }}
    @if (required) {
      <span class="text-red-500">*</span>
    }
  </label>
  
  <!-- Input trigger -->
  <div 
    (click)="toggleTimePicker()"
    class="relative w-full px-3 py-2 border border-input-border rounded-lg 
           focus-within:ring-2 focus-within:ring-primary focus-within:border-transparent
           bg-white cursor-pointer flex items-center justify-between">
    
    <span class="text-base SF-Regular" 
          [class.opacity-50]="!value"
          [class.text-text-main]="value">
      {{ formatDisplayTime() }}
    </span>
    
    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
            d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z">
      </path>
    </svg>
  </div>
  
  <!-- Time picker dropdown -->
  @if (isOpen) {
    <div class="absolute top-full left-0 right-0 mt-2 bg-white border border-input-border rounded-lg shadow-lg z-50 min-w-[300px]">
      
      <!-- Header -->
      <div class="p-4 border-b border-gray-200">
        <span class="text-base SF-Medium text-text-main">Start with</span>
        <div class="mt-2 text-2xl SF-Bold text-text-main">
          {{ selectedHour }}:{{ selectedMinute }} {{ selectedPeriod }}
        </div>
      </div>
      
      <!-- Time selection -->
      <div class="p-4">
        <div class="flex gap-4">
          
          <!-- Hours column -->
          <div class="flex-1">
            <label class="block text-sm SF-Medium text-gray-600 mb-2">Hour</label>
            <div class="max-h-32 overflow-y-auto border border-gray-200 rounded-md">
              @for (hour of hours; track hour) {
                <button
                  type="button"
                  (click)="selectHour(hour)"
                  class="w-full px-3 py-2 text-left hover:bg-gray-100 border-b border-gray-100 last:border-b-0"
                  [class.bg-primary]="selectedHour === hour"
                  [class.text-white]="selectedHour === hour"
                  [class.text-text-main]="selectedHour !== hour">
                  {{ hour }}
                </button>
              }
            </div>
          </div>
          
          <!-- Minutes column -->
          <div class="flex-1">
            <label class="block text-sm SF-Medium text-gray-600 mb-2">Minute</label>
            <div class="max-h-32 overflow-y-auto border border-gray-200 rounded-md">
              @for (minute of minutes; track minute) {
                <button
                  type="button"
                  (click)="selectMinute(minute)"
                  class="w-full px-3 py-2 text-left hover:bg-gray-100 border-b border-gray-100 last:border-b-0"
                  [class.bg-primary]="selectedMinute === minute"
                  [class.text-white]="selectedMinute === minute"
                  [class.text-text-main]="selectedMinute !== minute">
                  {{ minute }}
                </button>
              }
            </div>
          </div>
          
          <!-- AM/PM column -->
          <div class="flex-1">
            <label class="block text-sm SF-Medium text-gray-600 mb-2">Period</label>
            <div class="border border-gray-200 rounded-md">
              <button
                type="button"
                (click)="selectPeriod('AM')"
                class="w-full px-3 py-2 text-left hover:bg-gray-100 border-b border-gray-100"
                [class.bg-primary]="selectedPeriod === 'AM'"
                [class.text-white]="selectedPeriod === 'AM'"
                [class.text-text-main]="selectedPeriod !== 'AM'">
                AM
              </button>
              <button
                type="button"
                (click)="selectPeriod('PM')"
                class="w-full px-3 py-2 text-left hover:bg-gray-100"
                [class.bg-primary]="selectedPeriod === 'PM'"
                [class.text-white]="selectedPeriod === 'PM'"
                [class.text-text-main]="selectedPeriod !== 'PM'">
                PM
              </button>
            </div>
          </div>
          
        </div>
        
        <!-- Time shortcuts -->
        <!-- <div class="mt-4">
          <label class="block text-sm SF-Medium text-gray-600 mb-2">Quick select</label>
          <div class="flex flex-wrap gap-2">
            @for (time of ['09:00', '09:30', '10:00', '10:30', '11:00', '11:30']; track time) {
              <button
                type="button"
                (click)="selectHour(time.split(':')[0]); selectMinute(time.split(':')[1]); selectPeriod('AM')"
                class="px-3 py-1 text-sm border border-gray-200 rounded-md hover:bg-gray-100 text-primary">
                {{ time }}
              </button>
            }
          </div>
        </div> -->
      </div>
      
      <!-- Footer buttons -->
      <div class="flex gap-3 p-4 border-t border-gray-200">
        <button
          type="button"
          (click)="closeTimePicker()"
          class="flex-1 px-4 py-2 text-sm SF-Medium text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200">
          Cancel
        </button>
        
        <button
          type="button"
          (click)="confirmSelection()"
          class="flex-1 px-4 py-2 text-sm SF-Medium text-white bg-primary rounded-md hover:bg-primary-dark">
          Done
        </button>
      </div>
    </div>
  }
</div>

<!-- Backdrop to close time picker -->
@if (isOpen) {
  <div 
    (click)="closeTimePicker()"
    class="fixed inset-0 z-40">
  </div>
}